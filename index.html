<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ù†ØµØ© Ø§Ù„Ø®ØµØ§Ø¦Øµ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Ù…Ù‡Ù… Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
  <style>
    body {
      font-family: Tahoma, sans-serif;
      direction: rtl;
      text-align: center;
      margin: 0;
      padding: 0;
      background: #f8f9fa;
    }
    header {
      background: #007bff;
      color: white;
      padding: 15px;
      font-size: 22px;
      font-weight: bold;
    }
    .container { padding: 15px; }
    input {
      padding: 12px;
      width: 90%;
      font-size: 18px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    button {
      padding: 12px;
      font-size: 18px;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      width: 95%;
      margin: 5px 0;
    }
    button:hover { background: #0056b3; }
    .card {
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-top: 20px;
      text-align: right;
      font-size: 16px;
    }
    h3 { margin-top: 20px; color: #007bff; font-size: 18px; }
    h4 { margin-top: 15px; color: green; font-size: 18px; }
    .video-card, .contact-card {
        background: white;
   padding: 15px;
   margin: 10px auto;   /* ÙŠØ®Ù„ÙŠÙ‡Ø§ ÙÙŠ Ø§Ù„Ù†Øµ */
   border-radius: 10px;
   box-shadow: 0 2px 5px rgba(0,0,0,0.1);
   width: 75%;          /* ğŸ‘ˆ Ø¯Ù„ÙˆÙ‚ØªÙŠ Ø£ØµØºØ± Ø¨Ù†Ø³Ø¨Ø© 60% */
   text-align: center;
    }
    .video-card a {
      display: block;
      margin-top: 8px;
      text-decoration: none;
      color: #007bff;
      font-weight: bold;
      font-size: 16px;
    }
    .video-card a:hover { color: #0056b3; }
    .contact-card a {
      display: block;
      padding: 12px;
      background: #28a745;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      margin-top: 8px;
      font-size: 16px;
    }
    .contact-card a:hover { background: #218838; }

    /* ğŸ”¹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª */
    .grades-table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
      font-size: 16px;
    }
    .grades-table th, .grades-table td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    .grades-table th {
      background: #007bff;
      color: white;
    }
    .grades-table tr:nth-child(even) { background: #f2f2f2; }
    .grades-table tr:hover { background: #e9f7ff; }
  </style>
</head>
<body>
  <header>ğŸ“š Ù…Ù†ØµØ© Ø§Ù„Ø®ØµØ§Ø¦Øµ</header>
  
  <div class="container">
    <!-- ğŸ” Ø¨Ø­Ø« Ø§Ù„Ø·Ø§Ù„Ø¨ -->
    <input type="text" id="studentCode" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨">
    <button onclick="searchStudent()">Ø¨Ø­Ø«</button>
    <div id="studentInfo" class="card"></div>

    <!-- ğŸ¥ Ù‚Ø³Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª -->
    <h3>ğŸ¥ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</h3>
    <div id="videos"></div>

    <!-- ğŸ“ Ù‚Ø³Ù… Ø§Ù„ØªÙˆØ§ØµÙ„ -->
    <h3>ğŸ“ Ù„Ù„ØªÙˆØ§ØµÙ„</h3>
    <div id="contacts"></div>
  </div>

  <script>
    // ğŸ”¹ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø´ÙŠØªØ§Øª (CSV Ù…Ù†Ø´ÙˆØ±Ø© Ù…Ù† Ø¬ÙˆØ¬Ù„ Ø´ÙŠØªØ³)
    const SHEET_STUDENTS = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRj2ajSLPIBsAwHwv8qSVX7_5q5I_LATlqKEWkzOIdF_3Em9PmTTWZ8BnXNau0yCNeF1XAx9KX3PLrN/pub?gid=635336311&single=true&output=csv";
    const SHEET_VIDEOS   = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRj2ajSLPIBsAwHwv8qSVX7_5q5I_LATlqKEWkzOIdF_3Em9PmTTWZ8BnXNau0yCNeF1XAx9KX3PLrN/pub?gid=849351073&single=true&output=csv";
    const SHEET_CONTACTS = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRj2ajSLPIBsAwHwv8qSVX7_5q5I_LATlqKEWkzOIdF_3Em9PmTTWZ8BnXNau0yCNeF1XAx9KX3PLrN/pub?gid=218257892&single=true&output=csv";

    function safeNumber(val) {
      return (val === "" || isNaN(val)) ? 0 : Number(val);
    }

    async function fetchCSV(url) {
      const res = await fetch(url);
      const text = await res.text();
      const rows = text.split("\n").map(r => r.split(","));
      const headers = rows[0].map(h => h.trim());
      return rows.slice(1).map(row => {
        let obj = {};
        headers.forEach((h, i) => obj[h] = row[i] ? row[i].trim() : "");
        return obj;
      });
    }

    // ğŸ“Œ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·Ø§Ù„Ø¨
    async function searchStudent() {
      const code = document.getElementById("studentCode").value.trim();
      const students = await fetchCSV(SHEET_STUDENTS);
      let student = students.find(s => s.code === code);

      if (!student) {
        document.getElementById("studentInfo").innerHTML = "<p>âš ï¸ Ø§Ù„Ø·Ø§Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</p>";
        return;
      }

      let w1_exam = safeNumber(student.w1_exam);
      let w1_homework = safeNumber(student.w1_homework);
      let w1_tesmie3 = safeNumber(student.w1_tesmie3);

      let w2_exam = safeNumber(student.w2_exam);
      let w2_homework = safeNumber(student.w2_homework);
      let w2_tesmie3 = safeNumber(student.w2_tesmie3);

      let w3_exam = safeNumber(student.w3_exam);
      let w3_homework = safeNumber(student.w3_homework);
      let w3_tesmie3 = safeNumber(student.w3_tesmie3);

      let w4_exam = safeNumber(student.w4_exam);
      let w4_homework = safeNumber(student.w4_homework);
      let w4_tesmie3 = safeNumber(student.w4_tesmie3);

      let finalExam = safeNumber(student.finalExam);

      let total = w1_exam + w2_exam + w3_exam + w4_exam +
                  w1_homework + w2_homework + w3_homework + w4_homework +
                  w1_tesmie3 + w2_tesmie3 + w3_tesmie3 + w4_tesmie3 +
                  finalExam;

      let maxTotal = (4*10) + (4*10) + (4*10) + 20; // 140
      let percent = ((total / maxTotal) * 100).toFixed(2);

      document.getElementById("studentInfo").innerHTML = `
        <p><b>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</b> ${student.name}</p>
        <p><b>Ø§Ù„ØµÙ:</b> ${student.class}</p>
        <p><b>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©:</b> ${student.group}</p>
        <h3>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</h3>
        <table class="grades-table">
          <tr><th>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</th><th>Ø§Ù…ØªØ­Ø§Ù†</th><th>ÙˆØ§Ø¬Ø¨</th><th>ØªØ³Ù…ÙŠØ¹</th></tr>
          <tr><td>1</td><td>${w1_exam}/10</td><td>${w1_homework}/10</td><td>${w1_tesmie3}/10</td></tr>
          <tr><td>2</td><td>${w2_exam}/10</td><td>${w2_homework}/10</td><td>${w2_tesmie3}/10</td></tr>
          <tr><td>3</td><td>${w3_exam}/10</td><td>${w3_homework}/10</td><td>${w3_tesmie3}/10</td></tr>
          <tr><td>4</td><td>${w4_exam}/10</td><td>${w4_homework}/10</td><td>${w4_tesmie3}/10</td></tr>
        </table>
        <p>Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ø´Ø§Ù…Ù„: ${finalExam}/20</p>
        <h4>ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø·Ø§Ù„Ø¨: ${percent}%</h4>
      `;
    }

    // ğŸ“Œ Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
    async function loadVideos() {
      const videos = await fetchCSV(SHEET_VIDEOS);
      const container = document.getElementById("videos");
      container.innerHTML = videos.map(v => `
        <div class="video-card">
          <p><b>${v.title}</b></p>
          <p>${v.note}</p>
          <a href="${v.link}" target="_blank">Ù…Ø´Ø§Ù‡Ø¯Ø© ğŸ¬</a>
        </div>
      `).join("");
    }

    // ğŸ“Œ Ø¹Ø±Ø¶ ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„
    async function loadContacts() {
      const contacts = await fetchCSV(SHEET_CONTACTS);
      const container = document.getElementById("contacts");
      container.innerHTML = contacts.map(c => {
        let link = c.type === "whatsapp"
          ? `https://wa.me/${c.number}`
          : `tel:${c.number}`;
        return `
          <div class="contact-card">
            <p>${c.label}</p>
            <a href="${link}" target="_blank">ØªÙˆØ§ØµÙ„</a>
          </div>
        `;
      }).join("");
    }

    // ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹
    loadVideos();
    loadContacts();
  </script>
</body>
</html>




